### IMAP. Назначение


### Команды LIST. FETCH. STORE. SEARCH. COPY.
**LIST**

Чтобы получить список папок (подкаталогов), находящихся в определенной папке и доступных клиенту, можно воспользоваться командой LIST. Аргументами команды являются: имя каталога, список подкаталогов который хотим получить (пустая строка - "" означает текущий каталог) и маска имен подкаталогов. Имена каталогов и маски имен подкаталогов могут интерпретироваться по-разному, в зависимости от реализации почтовой системы и структуры описания иерархии папок. Например, список папок, находящихся в корне, можно получить так:

С: А004 LIST "/" *

S: * LIST (\Noinferiors ) "/" INBOX

S: * LIST <\Noinferiors ) "/" OUTBOX

S: * LIST <\Noinferiors ) "/" Waste Box

S: A004 OK LIST completed

Ответ сервера содержит список папок в соответствии с их положением в иерархии и флаги данных папок (флаг "\Noinferiors" означает, что внутри данной папки нет, и не может быть построена иерархия).

**FETCH**

После получения информации на каталог, пользователь может прочитать любое сообщение или определенную группу сообщении, часть сообщения или определенные атрибуты сообщения. Для этого используется команда FETCH. Аргументами данной команды являются порядковый номер сообщения и критерии запроса. Критерии содержат описание вида возвращаемой информации. Например, можно запросить части заголовков или UID-сообщений в папке, или сообщения, имеющие или не имеющие определенные флаги. Так запрос заголовков сообщений, находящихся в INBOX с порядковыми номерами от 10 до 12, будет выглядеть так:

С: А654 FETCH 10:12 BODY [HEADER]

S: * 10 FETCH BODY [HEADER] {350}

S: Date: Wed, 17 Jul 1996 02:23:25 -0700 (Pdt

S: From: raan@globe.com

S: Subject: Hi

S: To: imap@world.edu

S: Message-Id:

S^ mime-Vresion: 1.0

S: Content-Type: TEXT/PLAIN; CHARSET=US-ASCII

S:

S: )

S: * 11 FETCH ....

S: * 12 FETCH ....

S: A654 OK FETCH completed

**STORE**

После просмотра сообщения, пользователь может сохранить его с другими флагами, добавить или удалить флаги сообщения ( пометить данное сообщение на удаление). Для этого используется команда STORE. Аргументами команды являются: номера сообщений, идентификатор операции и перечень флагов. Например, операция добавления флага удаления ("\Dеleted") трем сообщениям выглядит следующим образом:

С: АОО3 SТОRЕ 2:4 +FLAGS (\DELETED)

S: * 2 FETCH FLAGS (\Deleted \ Seen)

S: * 3 FETCH FLAGS (\Deleted )

S: * 4 FETCH FLAGS (\Deleted \Flagged \Seen)

S: A003 OK STORE completed

Ответом на выполнение команды будут переданы строки новых флагов указанных сообщений.

**SEARCH**

Пользователь также может организовать поиск сообщений по определенным критериям. Для этого используется команда SEARCH. Например, поиск всех непрочитанных сообщений, поступивших от "smith" с 1-03-96 будет выглядеть так:

C: A282 SEARCH UNSEEN FROM 'Smith" SINCE 1-Mar-1996

S: * SEARCH 2 84 882

S: A282 OK SEARCH completed

Результатом поиска будут сообщения с последовательными номерами 2, 84 и 882.

**COPY**

Команда COPY копирует сообщения с заданными порядковыми номерами в указанный каталог, например:

C: A003 COPY 2:4 MEETENG

S: A003 OK COPY completed