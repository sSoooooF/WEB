Деплой (от англ. deploy, развёртывание, приведение в действие) — это размещение готовой версии программного обеспечения на платформе, доступной для пользователей.


### Развертывание новой версии на простом сервере
Плохой (но простой) деплой

- Запускаем watch на код, который перезапускает приложение при наличии изменений
- Обновляем код через git pull (плохой вариант из-за необходимости проставлять зависимости) или rsync (более интересный вариант. Где то есть отдельный сервер, где скачано приложение, настроено, проставлены зависимости и оно отправляется через rsync на сервер)
- Рестарт сервера watcher’ом
- Пауза у пользователей
- Возможное падение сервера


### Подход с сокетами и докерами
Деплой получше через сокеты и докеры

- Разворачивается рядом копия приложения с новой версией
- Переключаем на нее трафик
- Если все хорошо, удаляем старую версию

Один из вариантов сделать это через сокеты домена UNIX (файловые сокеты). Создаются две папки: old и new, в которых лежит файл server.sock. Этот файл «скармливается» NGINX и трафик переключается с порта на сокет. Далее NGINX перезапускается с новой конфигурацией и начинает работать вторая копия приложения. Если с ней что то не так, то трафик можно пустить назад.

Второй вариант сделать это через контейнеры. Каждый сервис (NGINX, Node js, база данных) «живет» в отдельном контейнере, так как есть правило «один контейнер – один сервис». При деплое ставится второй контейнер с приложением и на него переключается трафик. Если что-то не так, то есть возможность откатить назад.

### Понятие балансировщика
Балансировщик занимается балансированием трафика между копиями приложения. Балансирование происходит по схеме Round Robbin (По кругу 1, 2, 3, 1, 2, 3 и т.д.).